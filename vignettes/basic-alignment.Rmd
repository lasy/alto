---
title: "basic-alignment"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{basic-alignment}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

This is mainly a way to test our code without having a full `testthat` workflow.

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(alto)
library(purrr)
library(stringr)
set.seed(123)
```

First fit 10 models to toy data.

```{r}
data <- rmultinom(20, 5000, rep(0.1, 50))
colnames(data) <- 1:ncol(data)
lda_params <- setNames(map(1:10, ~ list(k = .)), 1:10)
lda_models <- run_lda_models(data = data, lda_varying_params_lists = lda_params)
```
```{r}
result <- align_topics(lda_models)
result
topics(result)
plot(result, color_by = "refinement")
plot(result, color_by = "branch")
plot(result, color_by = "topic")
plot(result, color_by = "robustness")
plot_beta(result)
```

Some more variants of `plot_beta`.

```{r}
plot_beta(result, "all")
plot_beta(result, c(2, 3, 5), n_features = 10)
plot_beta(result, c("2", "5", "10"), n_features = 10)
plot_beta(result, "last", n_features = 10)
```


```{r}
result <- align_topics(lda_models, method = "transport")
result
```

```{r}
plot(result)
plot_beta(result)
```
